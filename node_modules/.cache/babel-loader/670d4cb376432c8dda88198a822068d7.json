{"ast":null,"code":"import React from 'react';\n\nclass WeatherData extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.setLatLong = () => {\n      let latitude = this.getMyLocation().latitude;\n      let longitude = this.getMyLocation().longitude;\n      this.props.setLatLong(latitude, longitude);\n    };\n\n    this.getMyLocation = () => {\n      let location = null;\n      let latitude = null;\n      let longitude = null;\n\n      if (window.navigator && window.navigator.geolocation) {\n        location = window.navigator.geolocation;\n      }\n\n      if (location) {\n        location.getCurrentPosition(function (position) {\n          latitude = position.coords.latitude;\n          longitude = position.coords.longitude;\n        });\n        return {\n          latitude: latitude,\n          longitude: longitude\n        };\n      }\n\n      this.props.setLatLong(latitude, longitude);\n    };\n\n    this.newData = data => {\n      this.props.newData(data);\n    };\n\n    this.fetchDataByGeo = (latitude, longitude) => {\n      const url = 'https://api.openweathermap.org/data/2.5/weather?lat=' + latitude + '&lon=' + longitude + '&appid=9b32cf97b04c03ad2e6f0960ea7bdce3';\n      fetch(url).then(results => results.json()).then(wdata => {\n        this.newData(wdata);\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.latitude !== null && this.props.longitude !== null) {\n      this.fetchDataByGeo(this.props.latitude, this.props.longitude);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.latitude !== prevProps.latitude || this.props.longitude !== prevProps.longitude) {\n      this.fetchDataByGeo(this.props.latitude, this.props.longitude);\n    }\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nexport default WeatherData;","map":{"version":3,"sources":["/Users/uttamdarji/Desktop/weather/src/components/WeatherData/WeatherData.js"],"names":["React","WeatherData","Component","setLatLong","latitude","getMyLocation","longitude","props","location","window","navigator","geolocation","getCurrentPosition","position","coords","newData","data","fetchDataByGeo","url","fetch","then","results","json","wdata","componentDidMount","componentDidUpdate","prevProps","render"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAN,SAA0BD,KAAK,CAACE,SAAhC,CAA0C;AAAA;AAAA;;AAAA,SASxCC,UATwC,GAS3B,MAAM;AACjB,UAAIC,QAAQ,GAAG,KAAKC,aAAL,GAAqBD,QAApC;AACA,UAAIE,SAAS,GAAG,KAAKD,aAAL,GAAqBC,SAArC;AACA,WAAKC,KAAL,CAAWJ,UAAX,CAAsBC,QAAtB,EAA+BE,SAA/B;AACD,KAbuC;;AAAA,SAexCD,aAfwC,GAexB,MAAM;AACpB,UAAIG,QAAQ,GAAG,IAAf;AACA,UAAIJ,QAAQ,GAAG,IAAf;AACA,UAAIE,SAAS,GAAG,IAAhB;;AACA,UAAIG,MAAM,CAACC,SAAP,IAAoBD,MAAM,CAACC,SAAP,CAAiBC,WAAzC,EAAsD;AACpDH,QAAAA,QAAQ,GAAGC,MAAM,CAACC,SAAP,CAAiBC,WAA5B;AACD;;AACD,UAAIH,QAAJ,EAAa;AACXA,QAAAA,QAAQ,CAACI,kBAAT,CAA4B,UAAUC,QAAV,EAAoB;AAC9CT,UAAAA,QAAQ,GAAIS,QAAQ,CAACC,MAAT,CAAgBV,QAA5B;AACAE,UAAAA,SAAS,GAAIO,QAAQ,CAACC,MAAT,CAAgBR,SAA7B;AACD,SAHD;AAIA,eAAQ;AACNF,UAAAA,QAAQ,EAAEA,QADJ;AAENE,UAAAA,SAAS,EAAEA;AAFL,SAAR;AAID;;AACD,WAAKC,KAAL,CAAWJ,UAAX,CAAsBC,QAAtB,EAA+BE,SAA/B;AACD,KAjCuC;;AAAA,SA6CxCS,OA7CwC,GA6C7BC,IAAD,IAAU;AAClB,WAAKT,KAAL,CAAWQ,OAAX,CAAmBC,IAAnB;AACD,KA/CuC;;AAAA,SAiDxCC,cAjDwC,GAiDvB,CAACb,QAAD,EAAUE,SAAV,KAAwB;AACvC,YAAMY,GAAG,GAAG,yDAAyDd,QAAzD,GAAoE,OAApE,GAA8EE,SAA9E,GAA0F,yCAAtG;AACAa,MAAAA,KAAK,CAACD,GAAD,CAAL,CACCE,IADD,CACMC,OAAO,IAAIA,OAAO,CAACC,IAAR,EADjB,EAECF,IAFD,CAEOG,KAAD,IAAW;AACf,aAAKR,OAAL,CAAaQ,KAAb;AACD,OAJD;AAKD,KAxDuC;AAAA;;AA0DxCC,EAAAA,iBAAiB,GAAG;AAClB,QAAG,KAAKjB,KAAL,CAAWH,QAAX,KAAsB,IAAtB,IAA8B,KAAKG,KAAL,CAAWD,SAAX,KAAuB,IAAxD,EAA6D;AAC3D,WAAKW,cAAL,CAAoB,KAAKV,KAAL,CAAWH,QAA/B,EAAwC,KAAKG,KAAL,CAAWD,SAAnD;AACD;AACF;;AAGDmB,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC5B,QAAI,KAAKnB,KAAL,CAAWH,QAAX,KAAwBsB,SAAS,CAACtB,QAAlC,IAA8C,KAAKG,KAAL,CAAWD,SAAX,KAAyBoB,SAAS,CAACpB,SAArF,EAAgG;AAC9F,WAAKW,cAAL,CAAoB,KAAKV,KAAL,CAAWH,QAA/B,EAAwC,KAAKG,KAAL,CAAWD,SAAnD;AACD;AACF;;AAEDqB,EAAAA,MAAM,GAAG;AACP,WAAO,IAAP;AACD;;AAzEuC;;AA4E1C,eAAe1B,WAAf","sourcesContent":["import React from 'react';\n\nclass WeatherData extends React.Component {\n  // constructor(props) {\n  //   super(props);\n    \n  //   //this.getMyLocation();\n  //   // this.latitude = this.getMyLocation().latitude;\n  //   // this.longitude = this.getMyLocation().longitude;\n  // }\n\n  setLatLong = () => {\n    let latitude = this.getMyLocation().latitude;\n    let longitude = this.getMyLocation().longitude;\n    this.props.setLatLong(latitude,longitude);\n  }\n\n  getMyLocation = () => {\n    let location = null;\n    let latitude = null;\n    let longitude = null;\n    if (window.navigator && window.navigator.geolocation) {\n      location = window.navigator.geolocation\n    }\n    if (location){\n      location.getCurrentPosition(function (position) {\n        latitude = (position.coords.latitude);\n        longitude = (position.coords.longitude);\n      });\n      return ({\n        latitude: latitude,\n        longitude: longitude\n      });\n    }\n    this.props.setLatLong(latitude,longitude);        \n  }\n\n\n  // fetchDataByZip = (zipCode,countryCode) => {\n  //   const url = 'https://api.openweathermap.org/data/2.5/weather?zip=' + zipCode + ',' + countryCode + '&appid=9b32cf97b04c03ad2e6f0960ea7bdce3';\n  //   fetch(url)\n  //   .then(results => results.json())\n  //   .then((wdata) => {\n  //     this.newData(wdata);\n  //   });\n  // }\n\n  newData = (data) => {\n    this.props.newData(data);\n  }\n\n  fetchDataByGeo = (latitude,longitude) => {\n    const url = 'https://api.openweathermap.org/data/2.5/weather?lat=' + latitude + '&lon=' + longitude + '&appid=9b32cf97b04c03ad2e6f0960ea7bdce3';\n    fetch(url)\n    .then(results => results.json())\n    .then((wdata) => {\n      this.newData(wdata);\n    });\n  }\n\n  componentDidMount() {\n    if(this.props.latitude!==null && this.props.longitude!==null){\n      this.fetchDataByGeo(this.props.latitude,this.props.longitude);\n    }\n  }\n \n\n  componentDidUpdate(prevProps) {\n    if (this.props.latitude !== prevProps.latitude || this.props.longitude !== prevProps.longitude) {\n      this.fetchDataByGeo(this.props.latitude,this.props.longitude);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default WeatherData;"]},"metadata":{},"sourceType":"module"}